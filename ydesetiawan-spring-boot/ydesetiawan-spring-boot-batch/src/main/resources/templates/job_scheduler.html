<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title
	th:text="${@environment.getProperty('application_name')} + ' - ' + ${#messages.msg('label.job_scheduler.title')}">Job
	Scheduler</title>
<link rel="stylesheet" th:if="${#themes.code('name')==''}"
	th:href="@{'/css/default-master.css'}" />
<link rel="stylesheet" th:if="${#themes.code('name')!=''}"
	th:href="@{'/css/' + ${#themes.code('name')} + '-master.css'}" />
</head>
<body
	th:class="${#themes.code('skin')+(@xchange3Util.fetchCookie(#httpServletRequest.cookies, 'minifyMenu')!=null?' minified':'')}"
	th:classappend="${#authentication.principal.perspective}">
	<div th:replace="layout-dashboard :: header-panel"></div>
	<div th:replace="layout-dashboard :: left-panel"></div>
	<div id="main" role="main">
		<div th:replace="layout-dashboard :: default-ribbon"></div>

		<div id="content">
			<section>
				<h1 th:text="${#messages.msg('label.job_scheduler.title')}">Job
					Scheduler</h1>
				<div th:if="${alertSuccess}" class="alert alert-success fade in">
					<a href="#" class="close" data-dismiss="alert">&times;</a><span
						th:text="${alertSuccess}">Success message.</span>
				</div>
				<div th:if="${alertWarning}" class="alert alert-warning fade in">
					<a href="#" class="close" data-dismiss="alert">&times;</a><span
						th:text="${alertWarning}">Warning message.</span>
				</div>
				<p>
					<a href="#" th:href="@{/jobs}"
						th:text="${#messages.msg('label.job_scheduler.other_jobs')}"></a>
				</p>
				<table class="table" th:if="${not #lists.isEmpty(job_triggers)}">
					<thead>
						<tr>
							<th><span
								th:text="${#messages.msg('label.job_scheduler.trigger_job_name')}">Job
									Name</span></th>
							<th><span
								th:text="${#messages.msg('label.job_scheduler.trigger_calendar_name')}">Calendar
									Name</span></th>
							<th><span
								th:text="${#messages.msg('label.job_scheduler.trigger_cron_expression')}">Cron
									Expression</span></th>
							<th><span
								th:text="${#messages.msg('label.job_scheduler.trigger_next_runtime')}">Next
									Run Time</span></th>
							<th><span
								th:text="${#messages.msg('label.job_scheduler.trigger_state')}">Cron
									Expression</span></th>
							<th><span
								th:text="${#messages.msg('label.job_scheduler.action')}">Action</span></th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="job_trigger : ${job_triggers}">
							<td><span
								th:if="${job_trigger.class.name=='org.quartz.impl.triggers.CronTriggerImpl'}"
								class="label label-success">Cron</span> <span
								th:if="${@environment.getProperty('job_name.jobs.'+job_trigger.group)==null}"
								th:text="${job_trigger.group}">job name</span> <span
								th:unless="${@environment.getProperty('job_name.jobs.'+job_trigger.group)==null}"
								th:text="${@environment.getProperty('job_name.jobs.'+job_trigger.group)}">job
									name</span></td>
							<td th:text="${job_trigger.calendarName}">calendar name</td>
							<td th:text="${job_trigger.cronExpression}">cronExpression</td>
							<td th:text="${job_trigger.nextFireTime}">next runtime</td>
							<td
								th:include="base :: trigger_state (${job_trigger_states.get(job_trigger.key)!=null?job_trigger_states.get(job_trigger.key).toString():'UNKNOWN'})">state</td>
							<td><a class="btn btn-xs btn-primary"
								th:href="@{'/jobs/'+${jobName}+'/scheduler/'+${job_trigger.name}}"
								th:text="${#messages.msg('label.job_scheduler.view')}">view</a></td>
						</tr>
					</tbody>
				</table>

				<div th:if="${#lists.isEmpty(job_triggers)}">
					<p
						th:text="${#messages.msg('label.job_scheduler.warning.isEmpty')}">No
						job schedules available.</p>
				</div>

				<div>
					<a class="btn btn-xs btn-primary"
						th:href="@{'/jobs/'+${jobName}+'/scheduler/add'}"><span
						class="glyphicon glyphicon-plus-sign"></span> <span
						th:text="${#messages.msg('label.job_scheduler.add')}">Add
							Trigger</span></a>
				</div>
			</section>
		</div>
	</div>
	<div th:replace="layout-dashboard :: footer-panel"></div>
	<div th:replace="layout-dashboard :: shortcut-panel"></div>
	<div th:replace="base :: scripts"></div>
	<script type="text/javascript">
		//<![CDATA[
		jQuery(document).ready(function() {
			jQuery("span.timeago").timeago();
			(window.formDocumentReady || function() {
			})();
			setTimeout(function() {
				$(".alert").alert('close');
			}, 8000);
		});
		$("ul#menu-list li#administration-list").addClass("active");
		//]]>
	</script>

	<div th:replace="base :: script-google-analytics"></div>
</body>
</html>
